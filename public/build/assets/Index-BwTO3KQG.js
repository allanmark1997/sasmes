import{T as B,r as _,d as u,b as r,w as c,F as x,o as i,a as s,f as p,t as $,p as F,e as b,c as M,g as U,h as V,u as l,k as A,v as D,n as G,s as I}from"./app-D0BZgLZP.js";import{_ as H}from"./AppLayout-r2x-FhIk.js";import z from"./UnitLists-C9polntz.js";import{_ as T}from"./PrimaryButton-BWeNEyPl.js";import{_ as E}from"./DialogModal-BEwexNDf.js";import{_ as J}from"./SecondaryButton-CY1r61bh.js";import{_ as y}from"./Input-L8c4q9Ef.js";import{_ as w}from"./InputError-CmTGx8Qx.js";import{_ as K}from"./Icon-DA8V6aVC.js";import{i as f}from"./index-CCucUWYy.js";import"./sasmes_logo-C-K0o8NT.js";import"./sasmes_text-TaE2kHS7.js";import"./ConfirmationModal-B-2HGF6H.js";import"./Pagination2-BZEs3LKU.js";const W={class:"font-semibold text-lg text-white leading-tight"},X=["href"],q={class:"py-4"},Q={class:"flex justify-between"},Y={class:"flex gap-2 ml-8"},Z={class:"max-w-8xl mx-auto sm:px-6 lg:px-8"},ee={class:"overflow-hidden"},se={class:"grid grid-cols-12 gap-2"},te={key:0,class:"col-span-12 mx-auto"},oe=["src"],ae=["onClick"],re={class:"col-span-12"},le={class:"grid grid-cols-12 gap-1"},ne={class:"col-span-12"},ie={class:"col-span-full"},de={class:"grid grid-cols-12 gap-1 border p-1 mt-1 rounded-lg border-gray-300 h-[40vmin] overflow-y-auto"},ue=["value"],ce={for:"bordered-checkbox-1",class:"w-full py-1 ms-2 text-sm font-medium text-gray-700"},Ue={__name:"Index",props:["units","search","office_id","office","services"],setup(O){const n=O,o=B({name:null,abbrevation:null,image:[],office_id:n.office_id,selected:[]}),g=_(!1),d=_([]),v=_(""),m=_(n.search),k=()=>{o.reset(),d.value=[],g.value=!g.value},L=()=>{o.post(route("unit.store"),{preserveScroll:!0,onSuccess:()=>{o.reset(),f.success("Unit has been successfully added!",{autoClose:1e3,transition:f.TRANSITIONS.FLIP,position:f.POSITION.TOP_RIGHT}),o.reset(),d.value=[],k()}})},N=()=>{v.value="";let a=document.getElementById("profile_photo");a.click(),a.onchange=e=>{for(let t=0;t<e.target.files.length;t++)d.value.push(window.URL.createObjectURL(e.target.files[0])),o.image=e.target.files[0]}},S=a=>{if(v.value="",a.preventDefault(),a.dataTransfer.files.length>1)v.value="Only 1 image can be selected";else for(const t of a.dataTransfer.files){var e=URL.createObjectURL(t);d.value.push(e),o.image=t}},j=a=>{d.value.splice(a,1),o.image=null,f.warn("Image remove",{autoClose:1e3,transition:f.TRANSITIONS.FLIP,position:f.POSITION.TOP_RIGHT})},P=()=>{I.get(route("unit.index",{search:m.value,office_id:n.office_id}))},R=()=>{m.value="",I.get(route("unit.index",{search:m.value,office_id:n.office_id}))};return(a,e)=>(i(),u(x,null,[r(H,{title:"Units"},{header:c(()=>[s("h2",W,[s("a",{class:"hover:underline",href:a.route("office.index")},"Offices",8,X),p(" > "+$(n.office.name)+" > Units ",1)])]),default:c(()=>[s("div",q,[s("div",Q,[s("div",Y,[r(y,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),class:"rounded-lg mb-2 w-[30vmin]",type:"text",label:"Search Unit",onKeyup:F(P,["enter"])},null,8,["modelValue"]),m.value?(i(),u("button",{key:0,class:"h-10 my-auto mt-5",onClick:R},[r(K,{icon:"close_icon",size:"sm"})])):b("",!0)]),a.$page.props.auth.user.user_type=="root"||a.$page.props.auth.user.user_type=="admin"||a.$page.props.auth.user.user_type=="vcsas"||a.$page.props.auth.user.user_type=="director"||a.$page.props.auth.user.user_type=="unit_head"?(i(),M(T,{key:0,onClick:e[1]||(e[1]=t=>k()),class:"mb-2 mr-12 h-10 mt-5"},{default:c(()=>e[9]||(e[9]=[p(" Add Unit ")])),_:1})):b("",!0)]),s("div",Z,[s("div",ee,[r(z,{units:n.units,search:n.search,office_id:n.office_id},null,8,["units","search","office_id"])])])])]),_:1}),r(E,{show:g.value,onClose:e[8]||(e[8]=t=>g.value=!1),maxWidth:"2xl"},{title:c(()=>e[10]||(e[10]=[p("Add Unit here!")])),content:c(()=>[s("div",se,[d.value.length!=0?(i(),u("div",te,[(i(!0),u(x,null,U(d.value,(t,h)=>(i(),u("div",{key:h,class:"flex-shrink-0"},[s("img",{class:"w-64 h-64 rounded-lg",src:t},null,8,oe),s("button",{onClick:C=>j(h),class:"flex text-gray-400 hover:text-gray-600 mt-2 mx-auto"},e[11]||(e[11]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[s("path",{class:"text-red-500","stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),s("span",{class:"text-red-500"},"Remove",-1)]),8,ae)]))),128))])):b("",!0),d.value.length!=1?(i(),u("div",{key:1,class:"col-span-12",onDragover:e[2]||(e[2]=V(()=>{},["prevent"])),onDrop:e[3]||(e[3]=V(()=>{},["prevent"]))},[s("label",{onDrop:S,onClick:N,for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},e[12]||(e[12]=[s("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[s("svg",{"aria-hidden":"true",class:"w-8 h-8 mb-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),s("p",{class:"mb-1 text-sm text-gray-500"},[s("span",{class:"font-semibold"},"Click to upload"),p(" or drag and drop ")]),s("p",{class:"text-xs text-gray-500"}," PNG, JPG or JPEG (MAX.1024kb) ")],-1),s("input",{id:"profile_photo",type:"file",accept:"image/png, image/gif, image/jpeg",class:"hidden"},null,-1)]),32)],32)):b("",!0),s("div",re,[r(w,{message:l(o).errors.image||v.value,class:"mt-2"},null,8,["message"])])]),s("div",le,[s("div",ne,[r(y,{type:"text",label:"Unit name",modelValue:l(o).name,"onUpdate:modelValue":e[4]||(e[4]=t=>l(o).name=t)},null,8,["modelValue"]),r(w,{message:l(o).errors.name,class:"mt-2"},null,8,["message"])])]),s("div",ie,[r(y,{type:"text",label:"Unit abbrevation",modelValue:l(o).abbrevation,"onUpdate:modelValue":e[5]||(e[5]=t=>l(o).abbrevation=t)},null,8,["modelValue"]),r(w,{message:l(o).errors.abbrevation,class:"mt-2"},null,8,["message"])]),s("div",de,[(i(!0),u(x,null,U(n.services,(t,h)=>(i(),u("div",{key:h,class:"col-span-4 flex items-center ps-4 border border-gray-200 rounded"},[A(s("input",{id:"bordered-checkbox-1",type:"checkbox",value:t.id,"onUpdate:modelValue":e[6]||(e[6]=C=>l(o).selected=C),name:"bordered-checkbox",class:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500"},null,8,ue),[[D,l(o).selected]]),s("label",ce,$(t.name),1)]))),128))])]),footer:c(()=>[r(J,{onClick:e[7]||(e[7]=t=>g.value=!1),class:"mr-2 hover:bg-red-500"},{default:c(()=>e[13]||(e[13]=[p(" Cancel ")])),_:1}),r(T,{class:G([{"opacity-25":l(o).processing},"hover:bg-green-300"]),disabled:l(o).processing,onClick:L},{default:c(()=>e[14]||(e[14]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),p("Â Submit ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{Ue as default};
