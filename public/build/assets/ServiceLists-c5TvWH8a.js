import{T as V,r as S,d as r,a as e,e as p,F as $,g as I,b as i,t as c,w as d,o as a,n as C,c as N,u as o,f as g,k as O,q as B}from"./app-ByNts8ai.js";import{_}from"./Icon-B-zGG17M.js";import{d as D}from"./sasmes_logo-C-K0o8NT.js";import{_ as L}from"./PrimaryButton--0p8oWpF.js";import{_ as F}from"./DialogModal-D4LXnRBF.js";import{_ as M}from"./SecondaryButton-B3an-w_U.js";import{_ as G}from"./Input-g9HVHR3b.js";import{_ as T}from"./InputError-C8KnRcx1.js";import{_ as H}from"./ConfirmationModal-BprIxN3p.js";import{_ as Y}from"./Pagination2-BmOwQ__d.js";import{i as h}from"./index-m2FaSuUz.js";import{h as E}from"./moment-C5S46NFB.js";const W={key:0},q={class:"grid grid-cols-12 gap-2"},J={class:"w-full h-[38vmin] max-w-sm bg-white border border-gray-200 rounded-lg shadow group relative"},K={class:"absolute hidden group-hover:block top-0 right-0 text-white p-2 rounded"},Q=["onClick"],X=["onClick"],Z=["src","onerror"],ee={class:"px-5 pb-5"},se={class:"text-md font-semibold tracking-tight text-gray-900"},te={class:"flex items-center justify-between bottom-1 fixed"},oe={class:"mt-6 text-sm text-gray-500"},le={class:"h-[50vmin]"},ne={class:"col-span-full"},ie={class:"col-span-full grid grid-cols-6 gap-1"},ae={class:"col-span-5"},re={key:0,class:"absolute z-50 w-60 bg-white rounded shadow"},de={class:"overflow-y-auto py-1 h-[20vmin] text-gray-700","aria-labelledby":"dropdownUsersButton"},ue=["onClick"],ce={class:"col-span-1 my-auto flex"},me={key:0,class:"mt-6"},ve={class:"w-full mx-auto max-w-sm bg-white border border-gray-200 rounded-lg shadow"},fe={class:"flex flex-col items-center"},pe={class:"mb-1 text-xl font-medium text-gray-700"},ge={class:"grid grid-cols-12 gap-1"},_e={class:"col-span-6 flex text-left"},he={class:"text-sm text-gray-500 uppercase"},be={class:"col-span-6 flex text-left"},xe={class:"text-sm text-gray-500 uppercase"},Me={__name:"ServiceLists",props:["unit_services","search","office_id","unit_id","clients"],setup(x){const b=x,u=V({service:null,status:null}),t=V({search:"",id:"",client:"",unit_services_id:null,role:"",type:""}),m=S(!1),v=S(!1),w=S(!1),R=f=>{t.reset(),t.unit_services_id=f.id,m.value=!m.value},A=f=>{u.reset(),u.service=f,u.status=f.status!=1,v.value=!v.value},P=()=>{t.post(route("record.store"),{preserveScroll:!0,onSuccess:()=>{t.reset(),h.success("Client has been successfully added a service!",{autoClose:1e3,transition:h.TRANSITIONS.FLIP,position:h.POSITION.TOP_RIGHT}),m.value=!m.value}})},j=()=>{u.put(route("unit_service.status",{unitService:u.service}),{preserveScroll:!0,onSuccess:()=>{u.reset(),h.success("Service has been successfully updated the status!",{autoClose:1e3,transition:h.TRANSITIONS.FLIP,position:h.POSITION.TOP_RIGHT}),v.value=!v.value}})},z=f=>E(f).format("MMMM Do YYYY");return(f,s)=>(a(),r($,null,[x.unit_services.data.length==0?(a(),r("div",W,s[10]||(s[10]=[e("p",{class:"text-center font-bold text-[5vmin] mt-12"}," No Services! ",-1)]))):p("",!0),e("div",q,[(a(!0),r($,null,I(x.unit_services.data,(l,y)=>(a(),r("div",{key:y,class:"col-span-3"},[e("div",J,[e("div",K,[l.status==1?(a(),r("button",{key:0,onClick:k=>R(l),class:"bg-orange-500 rounded-md p-1 mr-1"},[i(_,{icon:"user"})],8,Q)):p("",!0),e("button",{onClick:k=>A(l),class:C(["rounded-md p-1",l.status==1?"bg-red-500":"bg-green-500"])},[l.status==1?(a(),N(_,{key:0,icon:"close_icon"})):(a(),N(_,{key:1,icon:"check"}))],10,X)]),e("img",{class:"object-scale-down p-8 rounded-t-lg h-[25vmin] w-[25vmin] mx-auto rounded-lg -mt-6",src:l.unit_service.photo,onerror:`this.src='${o(D)}'`,alt:"Service image"},null,8,Z),e("div",ee,[e("div",null,[e("h5",se,c(l.unit_service.name),1),e("small",null,c(l.unit_service.abbrevation),1)]),e("div",null,[e("p",{class:C(["text-xs p-1 text-center text-white rounded-lg font-bold w-[10vmin] mx-auto",l.status==1?"bg-green-500":"bg-red-500"])},c(l.status==1?"Active":"Deactivated"),3)])])])]))),128))]),e("div",te,[i(Y,{links:b.unit_services.links,search:b.search,office_id:b.office_id,unit_id:b.unit_id},null,8,["links","search","office_id","unit_id"]),e("p",oe," Showing "+c(x.unit_services.data.length)+" Units ",1)]),i(F,{show:m.value,onClose:s[7]||(s[7]=l=>m.value=!1),maxWidth:"2xl"},{title:d(()=>s[11]||(s[11]=[g("Client Admission here!")])),content:d(()=>{var l,y,k;return[e("div",le,[e("div",ne,[O(e("select",{class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full","onUpdate:modelValue":s[0]||(s[0]=n=>o(t).type=n)},s[12]||(s[12]=[e("option",{value:"",disabled:""},"Select Client Type",-1),e("option",{value:"citizen"},"Citizen",-1),e("option",{value:"business"},"Business",-1),e("option",{value:"government"},"Government",-1)]),512),[[B,o(t).type]]),i(T,{message:o(t).errors.type,class:"mt-2"},null,8,["message"])]),e("div",null,[O(e("select",{"onUpdate:modelValue":s[1]||(s[1]=n=>o(t).role=n),class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-[15vmin] h-10 mt-5 w-full"},s[13]||(s[13]=[e("option",{value:"",disabled:""},"Select Client Role",-1),e("option",{value:"student"},"Student",-1),e("option",{value:"employee"},"Employee",-1),e("option",{value:"alumni"},"Alumni",-1),e("option",{value:"guardian"},"Guardian",-1),e("option",{value:"others"},"Others",-1)]),512),[[B,o(t).role]]),i(T,{message:o(t).errors.role,class:"mt-2"},null,8,["message"])]),e("div",ie,[e("div",ae,[i(G,{type:"text",label:"Search Client name",modelValue:o(t).search,"onUpdate:modelValue":s[2]||(s[2]=n=>o(t).search=n)},null,8,["modelValue"]),i(T,{message:o(t).errors.client,class:"mt-2"},null,8,["message"]),o(t).search&&!o(t).client?(a(),r("div",re,[e("ul",de,[(a(!0),r($,null,I(b.clients,(n,U)=>(a(),r("li",{key:U},[n.lname.toLowerCase().includes(o(t).search.toLowerCase())||n.fname.toLowerCase().includes(o(t).search.toLowerCase())?(a(),r("a",{key:0,class:"flex items-center py-2 px-4 hover:bg-gray-100 cursor-pointer",onClick:we=>(o(t).id=n.id,o(t).client=n,w.value=!1,o(t).search="")},c(n.lname+", "+n.fname+" "+(n.mname?n.mname:"")),9,ue)):p("",!0)]))),128))]),s[14]||(s[14]=e("div",{class:"flex justify-center"},[e("small",null,"Results")],-1)),e("a",{onClick:s[3]||(s[3]=n=>(w.value=!1,o(t).client="",o(t).id=!1,o(t).search="")),class:"flex items-center p-3 text-sm font-medium text-blue-600 bg-gray-50 border-t border-gray-200 hover:bg-gray-100 hover:underline cursor-pointer"}," clear search ")])):p("",!0)]),e("div",ce,[o(t).client?(a(),r("button",{key:0,class:"h-10 my-auto mt-5",onClick:s[4]||(s[4]=n=>(w.value=!1,o(t).client="",o(t).id=!1,o(t).search=""))},[i(_,{icon:"close_icon",size:"sm"})])):p("",!0)])]),o(t).client?(a(),r("div",me,[e("div",ve,[e("div",fe,[e("h5",pe,c((l=o(t).client)==null?void 0:l.fname),1),e("div",ge,[e("div",_e,[i(_,{icon:"sex"}),e("span",he,c((y=o(t).client)==null?void 0:y.sex),1)]),e("div",be,[i(_,{icon:"calendar"}),e("span",xe,c(z((k=o(t).client)==null?void 0:k.created_at)),1)])]),e("div",null,[o(t).id?(a(),r("button",{key:0,class:"w-[10vmin] bg-red-500 rounded-lg mt-6 mb-2 text-white",onClick:s[5]||(s[5]=n=>(w.value=!1,o(t).client="",o(t).id=!1,o(t).search=""))}," Remove ")):p("",!0)])])])])):p("",!0)])]}),footer:d(()=>[i(M,{onClick:s[6]||(s[6]=l=>m.value=!1),class:"mr-2 hover:bg-red-500"},{default:d(()=>s[15]||(s[15]=[g(" Cancel ")])),_:1}),i(L,{class:C([{"opacity-25":o(t).processing},"hover:bg-green-300"]),disabled:o(t).processing,onClick:P},{default:d(()=>s[16]||(s[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),g(" Submit ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),i(H,{show:v.value,onClose:s[9]||(s[9]=l=>v.value=!1),maxWidth:"2xl"},{title:d(()=>[g(" Are you sure you want to update status of service("+c(o(u).service.unit_service.name)+")?",1)]),content:d(()=>s[17]||(s[17]=[])),footer:d(()=>[i(M,{onClick:s[8]||(s[8]=l=>v.value=!1),class:"mr-2"},{default:d(()=>s[18]||(s[18]=[g(" nevermind ")])),_:1}),i(L,{class:C([{"opacity-25":o(u).processing},"hover:bg-green-400"]),disabled:o(u).processing,onClick:j},{default:d(()=>s[19]||(s[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),g(" Confirm ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{Me as default};
