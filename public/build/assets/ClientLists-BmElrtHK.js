import{T as X,r as y,d as r,a as e,e as b,F as T,g as $,b as n,t as u,w as c,o as i,u as a,f as x,h as L,k as O,q as S,n as q}from"./app-U9doYziP.js";import{_ as v}from"./Icon-6vIU_oDg.js";import{d as K}from"./sasmes_logo-C-K0o8NT.js";import{_ as Q}from"./PrimaryButton-CkgAmpVB.js";import{_ as B}from"./DialogModal-CnTuov9i.js";import{_ as D}from"./SecondaryButton-CtnnteAw.js";import{_ as j}from"./Input-Cd8cCf9Z.js";import{_ as f}from"./InputError-Cd8hJCqZ.js";import{_ as Z,i as p}from"./index-BG7gUXTe.js";import{h as ee}from"./moment-C5S46NFB.js";const se={key:0},te={class:"grid grid-cols-12 gap-2"},oe={class:"w-full h-[40vmin] max-w-sm bg-white border border-gray-200 rounded-lg shadow group relative"},le={class:"absolute hidden group-hover:block top-0 right-0 text-white p-2 rounded"},ae=["onClick"],ne=["onClick"],re=["src","onerror"],ie={class:"px-5 pb-5"},de={class:"text-xl font-semibold tracking-tight text-gray-900 text-center"},ue={class:"flex items-center justify-between bottom-1 fixed"},ce={class:"mt-6 text-sm text-gray-500"},pe={class:"grid grid-cols-12 gap-2"},me={key:0,class:"col-span-12 mx-auto"},ge=["src"],ve=["onClick"],fe={class:"col-span-full"},he={class:"col-span-full"},xe={class:"col-span-full"},_e={class:"col-span-full"},ye={class:"col-span-full"},be={class:"col-span-full"},we={class:"grid grid-cols-12 gap-2 mt-2"},ke={key:0,class:"col-span-12 mx-auto"},Ce=["src"],Ie=["onClick"],Te={class:"grid grid-cols-12 gap-2"},Le={class:"col-span-12"},$e={class:"flex-shrink-0"},Oe=["src"],Se={class:"grid grid-cols-12 gap-1 mt-4"},je={class:"col-span-6 flex text-left"},Ve={class:"text-sm text-gray-500"},Ne={class:"col-span-6 flex text-left"},Pe={class:"text-sm text-gray-500 uppercase"},Re={class:"col-span-6 flex text-left"},Me={class:"text-sm text-gray-500"},Ue={class:"col-span-6 flex text-left"},Be={class:"text-sm text-gray-500 uppercase"},De={class:"col-span-6 flex text-left"},Ge={class:"text-sm text-gray-500 uppercase"},Fe={class:"col-span-6 flex text-left"},Ae={class:"text-sm text-gray-500 uppercase"},Ze={__name:"ClientLists",props:["clients","search"],setup(k){const V=k,t=X({name:null,sex:null,birthday:null,address:null,type:null,role:null,photo:[],id_photo:[],client:null}),h=y(!1),w=y(!1),C=y(""),I=y(""),m=y([]),g=y([]),G=l=>{t.reset(),m.value=[],g.value=[],t.client=l,t.name=l.name,t.sex=l.sex,t.birthday=l.birthday,t.address=l.address,t.type=l.type,t.role=l.role,m.value.push(l.photo),g.value.push(l.id_photo),h.value=!h.value},F=()=>{t.post(route("client.update",{client:t.client}),{preserveScroll:!0,onSuccess:()=>{t.reset(),p.success("Client has been successfully updated!",{autoClose:1e3,transition:p.TRANSITIONS.FLIP,position:p.POSITION.TOP_RIGHT}),t.reset(),h.value=!h.value}})},A=()=>{C.value="";let l=document.getElementById("profile_photo");l.click(),l.onchange=s=>{for(let o=0;o<s.target.files.length;o++)m.value.push(window.URL.createObjectURL(s.target.files[0])),t.photo=s.target.files[0]}},E=l=>{if(C.value="",l.preventDefault(),l.dataTransfer.files.length>1)C.value="Only 1 image can be selected";else for(const o of l.dataTransfer.files){var s=URL.createObjectURL(o);m.value.push(s),t.photo=o}},H=l=>{m.value.splice(l,1),t.photo=null,p.warn("Image remove",{autoClose:1e3,transition:p.TRANSITIONS.FLIP,position:p.POSITION.TOP_RIGHT})},z=()=>{I.value="";let l=document.getElementById("id_photo");l.click(),l.onchange=s=>{for(let o=0;o<s.target.files.length;o++)g.value.push(window.URL.createObjectURL(s.target.files[0])),t.id_photo=s.target.files[0]}},J=l=>{if(I.value="",l.preventDefault(),l.dataTransfer.files.length>1)I.value="Only 1 image can be selected";else for(const o of l.dataTransfer.files){var s=URL.createObjectURL(o);g.value.push(s),t.id_photo=o}},Y=l=>{g.value.splice(l,1),t.id_photo=null,p.warn("Image remove",{autoClose:1e3,transition:p.TRANSITIONS.FLIP,position:p.POSITION.TOP_RIGHT})},W=l=>{t.client=l,w.value=!w.value},N=l=>ee(l).format("MMMM Do YYYY");return(l,s)=>(i(),r(T,null,[k.clients.data.length==0?(i(),r("div",se,s[14]||(s[14]=[e("p",{class:"text-center font-bold text-[5vmin] mt-12"}," No Clients! ",-1)]))):b("",!0),e("div",te,[(i(!0),r(T,null,$(k.clients.data,(o,d)=>(i(),r("div",{key:d,class:"col-span-3"},[e("div",oe,[e("div",le,[e("button",{onClick:_=>W(o),class:"bg-green-500 rounded-md p-1 mr-1"},[n(v,{icon:"docs"})],8,ae),l.$page.props.auth.user.user_type=="root"||l.$page.props.auth.user.user_type=="admin"||l.$page.props.auth.user.user_type=="vcsas"||l.$page.props.auth.user.user_type=="director"||l.$page.props.auth.user.user_type=="unit_head"?(i(),r("button",{key:0,onClick:_=>G(o),class:"bg-orange-500 rounded-md p-1 mr-1"},[n(v,{icon:"pencil"})],8,ne)):b("",!0)]),e("img",{class:"object-obtain p-8 h-[30vmin] w-[30vmin] mx-auto rounded-full",src:o.photo,onerror:`this.src='${a(K)}'`,alt:"Client image"},null,8,re),e("div",ie,[e("div",null,[e("h5",de,u(o.name),1),e("small",null,u(o.abbrevation),1)])])])]))),128))]),e("div",ue,[n(Z,{links:V.clients.links,search:V.search},null,8,["links","search"]),e("p",ce," Showing "+u(k.clients.data.length)+" Clients ",1)]),n(B,{show:h.value,onClose:s[11]||(s[11]=o=>h.value=!1),maxWidth:"2xl"},{title:c(()=>s[15]||(s[15]=[x("Update Client here!")])),content:c(()=>[e("div",pe,[m.value.length!=0?(i(),r("div",me,[(i(!0),r(T,null,$(m.value,(o,d)=>(i(),r("div",{key:d,class:"flex-shrink-0"},[e("img",{class:"w-[20vmin] h-[20vmin] rounded-full",src:o},null,8,ge),e("button",{onClick:_=>H(d),class:"flex text-gray-400 hover:text-gray-600 mt-2 mx-auto"},s[16]||(s[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{class:"text-red-500","stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),e("span",{class:"text-red-500"},"Remove",-1)]),8,ve)]))),128))])):b("",!0),m.value.length!=1?(i(),r("div",{key:1,class:"col-span-12",onDragover:s[0]||(s[0]=L(()=>{},["prevent"])),onDrop:s[1]||(s[1]=L(()=>{},["prevent"]))},[e("label",{onDrop:E,onClick:A,for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},s[17]||(s[17]=[e("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[e("svg",{"aria-hidden":"true",class:"w-8 h-8 mb-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mb-1 text-sm text-gray-500"},[e("span",{class:"font-semibold"},"Click to upload"),x(" or drag and drop Client's Photo ")]),e("p",{class:"text-xs text-gray-500"}," PNG, JPG or JPEG (MAX.1024kb) ")],-1),e("input",{id:"profile_photo",type:"file",accept:"image/png, image/gif, image/jpeg",class:"hidden"},null,-1)]),32)],32)):b("",!0),n(f,{message:a(t).errors.photo||C.value,class:"mt-2 col-span-full"},null,8,["message"])]),e("div",fe,[n(j,{type:"text",label:"Client Name",modelValue:a(t).name,"onUpdate:modelValue":s[2]||(s[2]=o=>a(t).name=o)},null,8,["modelValue"]),n(f,{message:a(t).errors.name,class:"mt-2"},null,8,["message"])]),e("div",he,[O(e("select",{class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full","onUpdate:modelValue":s[3]||(s[3]=o=>a(t).sex=o)},s[18]||(s[18]=[e("option",{value:null,disabled:""},"Select Client Sex",-1),e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1)]),512),[[S,a(t).sex]]),n(f,{message:a(t).errors.sex,class:"mt-2"},null,8,["message"])]),e("div",xe,[n(j,{type:"date",label:"Client Birthday",modelValue:a(t).birthday,"onUpdate:modelValue":s[4]||(s[4]=o=>a(t).birthday=o)},null,8,["modelValue"]),n(f,{message:a(t).errors.birthday,class:"mt-2"},null,8,["message"])]),e("div",_e,[n(j,{type:"text",label:"Client Address",modelValue:a(t).address,"onUpdate:modelValue":s[5]||(s[5]=o=>a(t).address=o)},null,8,["modelValue"]),n(f,{message:a(t).errors.address,class:"mt-2"},null,8,["message"])]),e("div",ye,[O(e("select",{class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full","onUpdate:modelValue":s[6]||(s[6]=o=>a(t).role=o)},s[19]||(s[19]=[e("option",{value:null,disabled:""},"Select Client Role",-1),e("option",{value:"student"},"Student",-1),e("option",{value:"employee"},"Employee",-1),e("option",{value:"alumni"},"Alumni",-1),e("option",{value:"guardian"},"Guardian",-1),e("option",{value:"others"},"Others",-1)]),512),[[S,a(t).role]]),n(f,{message:a(t).errors.role,class:"mt-2"},null,8,["message"])]),e("div",be,[O(e("select",{class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full","onUpdate:modelValue":s[7]||(s[7]=o=>a(t).type=o)},s[20]||(s[20]=[e("option",{value:null,disabled:""},"Select Client Type",-1),e("option",{value:"citizen"},"Citizen",-1),e("option",{value:"business"},"Business",-1),e("option",{value:"government"},"Government",-1)]),512),[[S,a(t).type]]),n(f,{message:a(t).errors.role,class:"mt-2"},null,8,["message"])]),e("div",we,[g.value.length!=0?(i(),r("div",ke,[(i(!0),r(T,null,$(g.value,(o,d)=>(i(),r("div",{key:d,class:"flex-shrink-0"},[e("img",{class:"w-64 h-64 rounded-lg",src:o},null,8,Ce),e("button",{onClick:_=>Y(d),class:"flex text-gray-400 hover:text-gray-600 mt-2 mx-auto"},s[21]||(s[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{class:"text-red-500","stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),e("span",{class:"text-red-500"},"Remove",-1)]),8,Ie)]))),128))])):b("",!0),g.value.length!=1?(i(),r("div",{key:1,class:"col-span-12",onDragover:s[8]||(s[8]=L(()=>{},["prevent"])),onDrop:s[9]||(s[9]=L(()=>{},["prevent"]))},[e("label",{onDrop:J,onClick:z,for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},s[22]||(s[22]=[e("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[e("svg",{"aria-hidden":"true",class:"w-8 h-8 mb-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mb-1 text-sm text-gray-500"},[e("span",{class:"font-semibold"},"Click to upload"),x(" or drag and drop ID Photo ")]),e("p",{class:"text-xs text-gray-500"}," PNG, JPG or JPEG (MAX.1024kb) ")],-1),e("input",{id:"id_photo",type:"file",accept:"image/png, image/gif, image/jpeg",class:"hidden"},null,-1)]),32),n(f,{message:a(t).errors.id_photo||I.value,class:"mt-2"},null,8,["message"])],32)):b("",!0)])]),footer:c(()=>[n(D,{onClick:s[10]||(s[10]=o=>h.value=!1),class:"mr-2 hover:bg-red-500"},{default:c(()=>s[23]||(s[23]=[x(" Cancel ")])),_:1}),n(Q,{class:q([{"opacity-25":a(t).processing},"hover:bg-green-300"]),disabled:a(t).processing,onClick:F},{default:c(()=>s[24]||(s[24]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),x(" Update ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),n(B,{show:w.value,onClose:s[13]||(s[13]=o=>w.value=!1),maxWidth:"2xl"},{title:c(()=>{var o;return[x("Client's details of ("+u((o=a(t).client)==null?void 0:o.name)+")",1)]}),content:c(()=>{var o,d,_,P,R,M,U;return[e("div",Te,[e("div",Le,[e("div",$e,[e("img",{class:"w-[40vmin] h-[30vmin] rounded-lg mx-auto object-scale-down",src:(o=a(t).client)==null?void 0:o.id_photo},null,8,Oe)])])]),e("div",Se,[e("div",je,[n(v,{icon:"birthday"}),e("span",Ve,u(N((d=a(t).client)==null?void 0:d.birthday)),1)]),e("div",Ne,[n(v,{icon:"sex"}),e("span",Pe,u((_=a(t).client)==null?void 0:_.sex),1)]),e("div",Re,[n(v,{icon:"location"}),e("span",Me,u((P=a(t).client)==null?void 0:P.address),1)]),e("div",Ue,[n(v,{icon:"user"}),e("span",Be,u((R=a(t).client)==null?void 0:R.type),1)]),e("div",De,[n(v,{icon:"user"}),e("span",Ge,u((M=a(t).client)==null?void 0:M.role),1)]),e("div",Fe,[n(v,{icon:"calendar"}),e("span",Ae,u(N((U=a(t).client)==null?void 0:U.created_at)),1)])])]}),footer:c(()=>[n(D,{onClick:s[12]||(s[12]=o=>w.value=!1),class:"mr-2 hover:bg-red-500"},{default:c(()=>s[25]||(s[25]=[x(" Close ")])),_:1})]),_:1},8,["show"])],64))}};export{Ze as default};
