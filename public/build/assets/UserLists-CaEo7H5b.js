import{T as $,r as V,d,a as t,F as k,g as I,b as a,t as c,w as n,o as i,e as O,n as w,c as A,u as r,f as p,k as C,q as P,v as H}from"./app-tmtnelgk.js";import{_ as S}from"./Icon-Dp8efzqX.js";import{d as G}from"./sasmes_logo-C-K0o8NT.js";import{_ as T}from"./PrimaryButton-DkeN8bjp.js";import{_ as R}from"./DialogModal-DWCeSx2N.js";import{_ as N}from"./SecondaryButton-BhTnG2bT.js";import{_ as B}from"./Input-CoO9N0nl.js";import{_ as U}from"./InputError-nGFPoLU5.js";import{_ as W}from"./ConfirmationModal-D9PMgo9Q.js";import{_ as q}from"./Pagination2-C-sWCtbX.js";import{i as f}from"./index-CH5tq390.js";import"./moment-C5S46NFB.js";const z={key:0},J={key:1,class:"grid grid-cols-12 gap-2"},K={class:"w-full h-[38vmin] max-w-sm bg-white border border-gray-200 rounded-lg shadow group relative"},Q={class:"absolute hidden group-hover:block top-0 right-0 text-white p-2 rounded"},X=["onClick"],Y=["onClick"],Z=["onClick"],ee=["src","onerror"],se={class:"px-2 pb-2"},te={class:"text-md font-semibold tracking-tight text-gray-900 text-center -mt-4"},oe={class:"text-center mx-auto text-xs"},re={class:"text-center text-white mx-auto text-[1vmin] uppercase bg-green-500 w-[20vmin] rounded-lg mt-2 p-1"},le={class:"text-center text-white mx-auto text-[1vmin] uppercase bg-orange-500 w-[10vmin] rounded-lg mt-2 p-1 pl-1 pr-1"},ae={class:"flex items-center justify-between bottom-1 fixed"},ne={class:"mt-6 text-sm text-gray-500"},ie={class:"col-span-full"},ue={class:"col-span-full"},de={class:"col-span-full"},ce=["value"],me={class:"col-span-full"},pe={class:"col-span-full mt-4"},fe={class:"inline-flex items-center cursor-pointer"},ge={class:"grid grid-cols-12 gap-1 border p-1 mt-1 rounded-lg border-gray-300 h-[70vmin] overflow-y-auto"},ve=["value"],be={for:"bordered-checkbox-1",class:"w-full py-1 ms-2 text-sm font-medium text-gray-700"},Te={__name:"UserLists",props:["users","offices","search","position","office","units"],setup(x){const h=x,m=$({user:null,status:null}),u=$({user:null,selected:[]}),o=$({user:null,name:null,email:null,user_type:"",office_id:"",change_pass:!1}),v=V(!1),b=V(!1),_=V(!1),j=l=>{u.reset(),u.user=l,l.access_control.units.forEach(e=>{u.selected.push(e)}),_.value=!_.value},D=l=>{m.reset(),m.user=l,m.status=l.status!=1,v.value=!v.value},F=l=>{o.reset(),o.user=l,o.name=l.name,o.email=l.email,o.user_type=l.user_type,o.office_id=l.office_id,b.value=!b.value},L=()=>{m.put(route("user.status",{user:m.user}),{preserveScroll:!0,onSuccess:()=>{m.reset(),f.success("User has been successfully updated the status!",{autoClose:1e3,transition:f.TRANSITIONS.FLIP,position:f.POSITION.TOP_RIGHT}),v.value=!v.value}})},M=()=>{o.put(route("user.update",{user:o.user}),{preserveScroll:!0,onSuccess:()=>{o.reset(),f.success("User has been successfully updated.",{autoClose:1e3,transition:f.TRANSITIONS.FLIP,position:f.POSITION.TOP_RIGHT}),b.value=!b.value}})},E=()=>{u.put(route("access.update",{accessControl:u.user.access_control.id}),{preserveScroll:!0,onSuccess:()=>{u.reset(),f.success("User has been successfully updated.",{autoClose:1e3,transition:f.TRANSITIONS.FLIP,position:f.POSITION.TOP_RIGHT}),_.value=!_.value}})};return(l,e)=>(i(),d(k,null,[x.users.data.length==0?(i(),d("div",z,e[12]||(e[12]=[t("p",{class:"text-center font-bold text-[5vmin] mt-12"}," No Users! ",-1)]))):(i(),d("div",J,[(i(!0),d(k,null,I(x.users.data,(s,g)=>(i(),d("div",{key:g,class:"col-span-3"},[t("div",K,[t("div",Q,[(l.$page.props.auth.user.user_type=="root"||l.$page.props.auth.user.user_type=="admin")&&l.$page.props.auth.user.id!=s.id?(i(),d("button",{key:0,onClick:y=>F(s),class:"bg-orange-500 rounded-md p-1 mr-1",title:"Update User"},[a(S,{icon:"pencil"})],8,X)):O("",!0),(l.$page.props.auth.user.user_type=="root"||l.$page.props.auth.user.user_type=="admin")&&l.$page.props.auth.user.id!=s.id?(i(),d("button",{key:1,onClick:y=>D(s),class:w(["rounded-md p-1",s.status==1?"bg-red-500":"bg-green-500"]),title:"User Status"},[s.status==1?(i(),A(S,{key:0,icon:"close_icon"})):(i(),A(S,{key:1,icon:"check"}))],10,Y)):O("",!0),t("button",{onClick:y=>j(s),class:"rounded-md p-1 ml-1 bg-teal-500",title:"Access Control"},[a(S,{icon:"option"})],8,Z)]),t("img",{class:"object-obtain p-8 h-[20vmin] w-[20vmin] mx-auto rounded-full -mt-5",src:s.profile_photo_url,onerror:`this.src='${r(G)}'`,alt:"User image"},null,8,ee),t("div",se,[t("div",null,[t("h5",te,c(s.name),1),t("p",oe,c(s.email),1),t("p",re,c(s.user_type=="root"?"Super Admin":s.user_type=="admin"?"Admin":s.user_type=="vcsas"?"VCSAS":s.user_type=="director"?"Director":s.user_type=="unit_head"?"Unit Head":"Unit Staff"),1),t("p",le,c(s.office.abbrevation),1),t("p",{class:w(["text-[1vmin] p-1 text-center text-white rounded-lg font-bold w-[10vmin] mx-auto mt-2",s.status==1?"bg-green-500":"bg-red-500"])},c(s.status==1?"Active":"Deactivated"),3)])])])]))),128))])),t("div",ae,[a(q,{links:h.users.links,search:h.search,position:h.position,office:h.office},null,8,["links","search","position","office"]),t("p",ne," Showing "+c(x.users.data.length)+" Users ",1)]),a(W,{show:v.value,onClose:e[1]||(e[1]=s=>v.value=!1),maxWidth:"2xl"},{title:n(()=>[p(" Are you sure you want to update status of this user("+c(r(m).user.name)+")?",1)]),content:n(()=>e[13]||(e[13]=[])),footer:n(()=>[a(N,{onClick:e[0]||(e[0]=s=>v.value=!1),class:"mr-2"},{default:n(()=>e[14]||(e[14]=[p(" nevermind ")])),_:1}),a(T,{class:w([{"opacity-25":r(m).processing},"hover:bg-green-400"]),disabled:r(m).processing,onClick:L},{default:n(()=>e[15]||(e[15]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),p(" Confirm ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(R,{show:b.value,onClose:e[8]||(e[8]=s=>b.value=!1),maxWidth:"2xl"},{title:n(()=>e[16]||(e[16]=[p("Update User here!")])),content:n(()=>[t("div",ie,[a(B,{type:"text",label:"User Name",modelValue:r(o).name,"onUpdate:modelValue":e[2]||(e[2]=s=>r(o).name=s)},null,8,["modelValue"]),a(U,{message:r(o).errors.name,class:"mt-2"},null,8,["message"])]),t("div",ue,[a(B,{type:"email",label:"User Email",modelValue:r(o).email,"onUpdate:modelValue":e[3]||(e[3]=s=>r(o).email=s)},null,8,["modelValue"]),a(U,{message:r(o).errors.email,class:"mt-2"},null,8,["message"])]),t("div",de,[C(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>r(o).office_id=s),class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full"},[e[17]||(e[17]=t("option",{value:"",disabled:""},"Select Office",-1)),(i(!0),d(k,null,I(h.offices,(s,g)=>(i(),d("option",{key:g,value:s.id},c(s.abbrevation)+"("+c(s.name)+")",9,ce))),128))],512),[[P,r(o).office_id]]),a(U,{message:r(o).errors.office_id,class:"mt-2"},null,8,["message"])]),t("div",me,[C(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>r(o).user_type=s),class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full"},e[18]||(e[18]=[t("option",{value:"",disabled:""},"Select User Position",-1),t("option",{value:"root"},"Root",-1),t("option",{value:"admin"},"Admin",-1),t("option",{value:"vcsas"},"VCSAS",-1),t("option",{value:"director"},"Director",-1),t("option",{value:"unit_head"},"Unit Head",-1),t("option",{value:"unit_staff"},"Unit Staff",-1)]),512),[[P,r(o).user_type]]),a(U,{message:r(o).errors.user_type,class:"mt-2"},null,8,["message"])]),t("div",pe,[t("label",fe,[C(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>r(o).change_pass=s),value:"",class:"sr-only peer",checked:""},null,512),[[H,r(o).change_pass]]),e[19]||(e[19]=t("div",{class:"relative w-11 h-6 bg-orange-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-green-300 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"},null,-1)),e[20]||(e[20]=t("span",{class:"ms-3 text-sm font-medium text-gray-500"},"Reset Password",-1))])])]),footer:n(()=>[a(N,{onClick:e[7]||(e[7]=s=>b.value=!1),class:"mr-2 hover:bg-red-500"},{default:n(()=>e[21]||(e[21]=[p(" Cancel ")])),_:1}),a(T,{class:w([{"opacity-25":r(o).processing},"hover:bg-green-300"]),disabled:r(o).processing,onClick:M},{default:n(()=>e[22]||(e[22]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),p(" Update ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(R,{show:_.value,onClose:e[11]||(e[11]=s=>_.value=!1),maxWidth:"2xl"},{title:n(()=>{var s,g;return[p("Access Control for user ("+c((g=(s=r(u))==null?void 0:s.user)==null?void 0:g.name)+")",1)]}),content:n(()=>[t("div",ge,[(i(!0),d(k,null,I(h.units,(s,g)=>(i(),d("div",{key:g,class:"col-span-4 flex items-center ps-4 border border-gray-200 rounded h-[5vmin]"},[C(t("input",{id:"bordered-checkbox-1",type:"checkbox",value:s.id,"onUpdate:modelValue":e[9]||(e[9]=y=>r(u).selected=y),name:"bordered-checkbox",class:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500"},null,8,ve),[[H,r(u).selected]]),t("label",be,c(s.name),1)]))),128))])]),footer:n(()=>[a(N,{onClick:e[10]||(e[10]=s=>_.value=!1),class:"mr-2 hover:bg-red-500"},{default:n(()=>e[23]||(e[23]=[p(" Cancel ")])),_:1}),a(T,{class:w([{"opacity-25":r(u).processing},"hover:bg-green-300"]),disabled:r(u).processing,onClick:E},{default:n(()=>e[24]||(e[24]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),p(" Submit ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{Te as default};
