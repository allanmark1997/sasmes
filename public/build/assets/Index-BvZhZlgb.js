import{T as j,r as w,d,b as r,w as a,F as I,o as u,a as s,f as m,t as L,p as Y,e as y,g as N,k as S,v as Z,u as l,n as U,h as T,q as P,s as $}from"./app-CnuvEbKW.js";import{_ as ee}from"./AppLayout-77OJtkDX.js";import se from"./ServiceLists-BneTRwCi.js";import{_ as O}from"./PrimaryButton-BsvO6op3.js";import{_ as M}from"./DialogModal-DLRKL2w4.js";import{_ as B}from"./SecondaryButton-B0_pcySa.js";import{_ as V}from"./Input-DGh16_TM.js";import{_ as v}from"./InputError-E4Ccip6I.js";import{_ as te}from"./Icon-DoVO73S9.js";import{i as c}from"./index-CS8w3ufD.js";import"./sasmes_logo-C-K0o8NT.js";import"./sasmes_text-TaE2kHS7.js";import"./ConfirmationModal-D892aUm_.js";import"./moment-C5S46NFB.js";const oe={class:"font-semibold text-lg text-white leading-tight"},le=["href"],re=["href"],ne={class:"py-4"},ie={class:"flex justify-between"},ae={class:"flex gap-2 ml-8"},de={class:"max-w-8xl mx-auto sm:px-6 lg:px-8"},ue={class:"overflow-hidden"},me={class:"grid grid-cols-12 gap-1 border p-1 mt-1 rounded-lg border-gray-300 h-[20vmin] overflow-y-auto"},ce=["value"],pe={for:"bordered-checkbox-1",class:"w-full py-1 ms-2 text-sm font-medium text-gray-700"},ve={class:"grid grid-cols-12 gap-2"},fe={key:0,class:"col-span-12 mx-auto"},ge=["src"],he=["onClick"],xe={class:"col-span-full"},be={class:"col-span-full"},we={class:"col-span-full"},_e={class:"col-span-full"},ye={class:"col-span-full"},ke={class:"col-span-full"},Ce={class:"grid grid-cols-12 gap-2 mt-2"},Ie={key:0,class:"col-span-12 mx-auto"},Se=["src"],Te=["onClick"],De={__name:"Index",props:["unit_services","unit","search","office_id","office","services","unit_id","service","clients"],setup(A){const i=A,p=j({office_id:i.office_id,unit_id:i.unit_id,selected:[]}),o=j({name:null,sex:null,birthday:null,address:null,type:null,role:null,photo:[],id_photo:[]}),f=w(!1),g=w(!1),k=w(""),C=w(""),h=w([]),x=w([]),_=w(i.search),F=()=>{p.reset(),f.value=!f.value},G=()=>{o.reset(),h.value=[],x.value=[],g.value=!g.value},D=()=>{p.post(route("unit_service.store"),{preserveScroll:!0,onSuccess:()=>{p.reset(),c.success("Service has been successfully added!",{autoClose:1e3,transition:c.TRANSITIONS.FLIP,position:c.POSITION.TOP_RIGHT}),p.reset(),f.value=!f.value}})},H=()=>{o.post(route("client.store"),{preserveScroll:!0,onSuccess:()=>{o.reset(),c.success("Client has been successfully registered!",{autoClose:1e3,transition:c.TRANSITIONS.FLIP,position:c.POSITION.TOP_RIGHT}),o.reset(),g.value=!g.value}})},z=()=>{k.value="";let n=document.getElementById("profile_photo");n.click(),n.onchange=e=>{for(let t=0;t<e.target.files.length;t++)h.value.push(window.URL.createObjectURL(e.target.files[0])),o.photo=e.target.files[0]}},E=n=>{if(k.value="",n.preventDefault(),n.dataTransfer.files.length>1)k.value="Only 1 image can be selected";else for(const t of n.dataTransfer.files){var e=URL.createObjectURL(t);h.value.push(e),o.photo=t}},J=n=>{h.value.splice(n,1),o.photo=null,c.warn("Image remove",{autoClose:1e3,transition:c.TRANSITIONS.FLIP,position:c.POSITION.TOP_RIGHT})},K=()=>{C.value="";let n=document.getElementById("id_photo");n.click(),n.onchange=e=>{for(let t=0;t<e.target.files.length;t++)x.value.push(window.URL.createObjectURL(e.target.files[0])),o.id_photo=e.target.files[0]}},W=n=>{if(C.value="",n.preventDefault(),n.dataTransfer.files.length>1)C.value="Only 1 image can be selected";else for(const t of n.dataTransfer.files){var e=URL.createObjectURL(t);x.value.push(e),o.id_photo=t}},X=n=>{x.value.splice(n,1),o.id_photo=null,c.warn("Image remove",{autoClose:1e3,transition:c.TRANSITIONS.FLIP,position:c.POSITION.TOP_RIGHT})},q=()=>{$.get(route("unit_service.index",{search:_.value,office_id:i.office.id,unit_id:i.unit_id}))},Q=()=>{_.value="",$.get(route("unit_service.index",{search:_.value,office_id:i.office.id,unit_id:i.unit_id}))};return(n,e)=>(u(),d(I,null,[r(ee,{title:"Services"},{header:a(()=>[s("h2",oe,[s("a",{class:"hover:underline",href:n.route("office.index")},"Offices",8,le),e[18]||(e[18]=m(" > ")),s("a",{class:"hover:underline",href:n.route("unit.index",{office_id:i.office.id})},L(i.office.name),9,re),m(" > "+L(i.unit.name)+" > Services ",1)])]),default:a(()=>[s("div",ne,[s("div",ie,[s("div",ae,[r(V,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),class:"rounded-lg mb-2 w-[30vmin]",type:"text",label:"Search Service",onKeyup:Y(q,["enter"])},null,8,["modelValue"]),_.value?(u(),d("button",{key:0,class:"h-10 my-auto mt-5",onClick:Q},[r(te,{icon:"close_icon",size:"sm"})])):y("",!0)]),s("div",null,[r(O,{onClick:e[1]||(e[1]=t=>F()),class:"mb-2 mr-2 h-10 mt-5"},{default:a(()=>e[19]||(e[19]=[m(" Add Service ")])),_:1}),r(O,{onClick:e[2]||(e[2]=t=>G()),class:"mb-2 mr-12 h-10 mt-5"},{default:a(()=>e[20]||(e[20]=[m(" Register Client ")])),_:1})])]),s("div",de,[s("div",ue,[r(se,{unit_services:i.unit_services,search:i.search,office_id:i.office_id,unit_id:i.unit_id,clients:i.clients},null,8,["unit_services","search","office_id","unit_id","clients"])])])])]),_:1}),r(M,{show:f.value,onClose:e[5]||(e[5]=t=>f.value=!1),maxWidth:"2xl"},{title:a(()=>e[21]||(e[21]=[m("Add Service here!")])),content:a(()=>[s("div",me,[(u(!0),d(I,null,N(i.services,(t,b)=>(u(),d("div",{key:b,class:"col-span-4 flex items-center ps-4 border border-gray-200 rounded"},[S(s("input",{id:"bordered-checkbox-1",type:"checkbox",value:t.id,"onUpdate:modelValue":e[3]||(e[3]=R=>l(p).selected=R),name:"bordered-checkbox",class:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500"},null,8,ce),[[Z,l(p).selected]]),s("label",pe,L(t.name),1)]))),128))]),s("div",null,[r(v,{message:l(p).errors.services,class:"mt-2"},null,8,["message"])])]),footer:a(()=>[r(B,{onClick:e[4]||(e[4]=t=>f.value=!1),class:"mr-2 hover:bg-red-500"},{default:a(()=>e[22]||(e[22]=[m(" Cancel ")])),_:1}),r(O,{class:U([{"opacity-25":l(p).processing},"hover:bg-green-300"]),disabled:l(p).processing,onClick:D},{default:a(()=>e[23]||(e[23]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),m(" Submit ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),r(M,{show:g.value,onClose:e[17]||(e[17]=t=>g.value=!1),maxWidth:"2xl"},{title:a(()=>e[24]||(e[24]=[m("Register New Client here!")])),content:a(()=>[s("div",ve,[h.value.length!=0?(u(),d("div",fe,[(u(!0),d(I,null,N(h.value,(t,b)=>(u(),d("div",{key:b,class:"flex-shrink-0"},[s("img",{class:"w-[20vmin] h-[20vmin] rounded-full",src:t},null,8,ge),s("button",{onClick:R=>J(b),class:"flex text-gray-400 hover:text-gray-600 mt-2 mx-auto"},e[25]||(e[25]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[s("path",{class:"text-red-500","stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),s("span",{class:"text-red-500"},"Remove",-1)]),8,he)]))),128))])):y("",!0),h.value.length!=1?(u(),d("div",{key:1,class:"col-span-12",onDragover:e[6]||(e[6]=T(()=>{},["prevent"])),onDrop:e[7]||(e[7]=T(()=>{},["prevent"]))},[s("label",{onDrop:E,onClick:z,for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},e[26]||(e[26]=[s("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[s("svg",{"aria-hidden":"true",class:"w-8 h-8 mb-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),s("p",{class:"mb-1 text-sm text-gray-500"},[s("span",{class:"font-semibold"},"Click to upload"),m(" or drag and drop Client's Photo ")]),s("p",{class:"text-xs text-gray-500"}," PNG, JPG or JPEG (MAX.1024kb) ")],-1),s("input",{id:"profile_photo",type:"file",accept:"image/png, image/gif, image/jpeg",class:"hidden"},null,-1)]),32)],32)):y("",!0),r(v,{message:l(o).errors.photo||k.value,class:"mt-2 col-span-full"},null,8,["message"])]),s("div",xe,[r(V,{type:"text",label:"Client Name",modelValue:l(o).name,"onUpdate:modelValue":e[8]||(e[8]=t=>l(o).name=t)},null,8,["modelValue"]),r(v,{message:l(o).errors.name,class:"mt-2"},null,8,["message"])]),s("div",be,[S(s("select",{class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full","onUpdate:modelValue":e[9]||(e[9]=t=>l(o).sex=t)},e[27]||(e[27]=[s("option",{value:null,disabled:""},"Select Client Sex",-1),s("option",{value:"male"},"Male",-1),s("option",{value:"female"},"Female",-1)]),512),[[P,l(o).sex]]),r(v,{message:l(o).errors.sex,class:"mt-2"},null,8,["message"])]),s("div",we,[r(V,{type:"date",label:"Client Birthday",modelValue:l(o).birthday,"onUpdate:modelValue":e[10]||(e[10]=t=>l(o).birthday=t)},null,8,["modelValue"]),r(v,{message:l(o).errors.birthday,class:"mt-2"},null,8,["message"])]),s("div",_e,[r(V,{type:"text",label:"Client Address",modelValue:l(o).address,"onUpdate:modelValue":e[11]||(e[11]=t=>l(o).address=t)},null,8,["modelValue"]),r(v,{message:l(o).errors.address,class:"mt-2"},null,8,["message"])]),s("div",ye,[S(s("select",{class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full","onUpdate:modelValue":e[12]||(e[12]=t=>l(o).role=t)},e[28]||(e[28]=[s("option",{value:null,disabled:""},"Select Client Role",-1),s("option",{value:"student"},"Student",-1),s("option",{value:"employee"},"Employee",-1),s("option",{value:"alumni"},"Alumni",-1),s("option",{value:"guardian"},"Guardian",-1),s("option",{value:"others"},"Others",-1)]),512),[[P,l(o).role]]),r(v,{message:l(o).errors.role,class:"mt-2"},null,8,["message"])]),s("div",ke,[S(s("select",{class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full","onUpdate:modelValue":e[13]||(e[13]=t=>l(o).type=t)},e[29]||(e[29]=[s("option",{value:null,disabled:""},"Select Client Type",-1),s("option",{value:"citizen"},"Citizen",-1),s("option",{value:"business"},"Business",-1),s("option",{value:"government"},"Government",-1)]),512),[[P,l(o).type]]),r(v,{message:l(o).errors.role,class:"mt-2"},null,8,["message"])]),s("div",Ce,[x.value.length!=0?(u(),d("div",Ie,[(u(!0),d(I,null,N(x.value,(t,b)=>(u(),d("div",{key:b,class:"flex-shrink-0"},[s("img",{class:"w-64 h-64 rounded-lg",src:t},null,8,Se),s("button",{onClick:R=>X(b),class:"flex text-gray-400 hover:text-gray-600 mt-2 mx-auto"},e[30]||(e[30]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[s("path",{class:"text-red-500","stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),s("span",{class:"text-red-500"},"Remove",-1)]),8,Te)]))),128))])):y("",!0),x.value.length!=1?(u(),d("div",{key:1,class:"col-span-12",onDragover:e[14]||(e[14]=T(()=>{},["prevent"])),onDrop:e[15]||(e[15]=T(()=>{},["prevent"]))},[s("label",{onDrop:W,onClick:K,for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},e[31]||(e[31]=[s("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[s("svg",{"aria-hidden":"true",class:"w-8 h-8 mb-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),s("p",{class:"mb-1 text-sm text-gray-500"},[s("span",{class:"font-semibold"},"Click to upload"),m(" or drag and drop ID Photo ")]),s("p",{class:"text-xs text-gray-500"}," PNG, JPG or JPEG (MAX.1024kb) ")],-1),s("input",{id:"id_photo",type:"file",accept:"image/png, image/gif, image/jpeg",class:"hidden"},null,-1)]),32),r(v,{message:l(o).errors.id_photo||C.value,class:"mt-2"},null,8,["message"])],32)):y("",!0)])]),footer:a(()=>[r(B,{onClick:e[16]||(e[16]=t=>g.value=!1),class:"mr-2 hover:bg-red-500"},{default:a(()=>e[32]||(e[32]=[m(" Cancel ")])),_:1}),r(O,{class:U([{"opacity-25":l(o).processing},"hover:bg-green-300"]),disabled:l(o).processing,onClick:H},{default:a(()=>e[33]||(e[33]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),m(" Register ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{De as default};
