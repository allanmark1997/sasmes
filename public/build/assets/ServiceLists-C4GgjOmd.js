import{T as N,r as $,d as r,a as e,e as g,F as V,g as O,b as i,t as c,w as d,o as a,n as C,c as B,u as o,f as _,k as T,q as I}from"./app-PqQZyH9m.js";import{_ as h}from"./Icon-CrKloIWW.js";import{d as D}from"./sasmes_logo-C-K0o8NT.js";import{_ as L}from"./PrimaryButton-B7O4sDbK.js";import{_ as F}from"./DialogModal-XMPB8Pkm.js";import{_ as A}from"./SecondaryButton-DY9GuG2d.js";import{_ as G}from"./Input-BtBuLjD6.js";import{_ as S}from"./InputError-CPwee-PK.js";import{_ as H}from"./ConfirmationModal-BHUQQtks.js";import{_ as Y,i as b}from"./index-CIGi2BoF.js";import{h as W}from"./moment-C5S46NFB.js";const E={key:0},q={class:"grid grid-cols-12 gap-2"},J={class:"w-full h-[38vmin] max-w-sm bg-white border border-gray-200 rounded-lg shadow group relative"},K={class:"absolute hidden group-hover:block top-0 right-0 text-white p-2 rounded"},Q=["onClick"],X=["onClick"],Z=["src","onerror"],ee={class:"px-5 pb-5"},se={class:"text-md font-semibold tracking-tight text-gray-900"},te={class:"flex items-center justify-between bottom-1 fixed"},oe={class:"mt-6 text-sm text-gray-500"},le={class:"h-[50vmin]"},ne={class:"col-span-full"},ie={class:"col-span-full"},ae={class:"col-span-full grid grid-cols-6 gap-1"},re={class:"col-span-5"},de={key:0,class:"absolute z-50 w-60 bg-white rounded shadow"},ue={class:"overflow-y-auto py-1 h-[20vmin] text-gray-700","aria-labelledby":"dropdownUsersButton"},ce=["onClick"],me={class:"col-span-1 my-auto flex"},ve={key:0,class:"mt-6"},pe={class:"w-full mx-auto max-w-sm bg-white border border-gray-200 rounded-lg shadow"},fe={class:"flex flex-col items-center"},ge={class:"mb-1 text-xl font-medium text-gray-700"},_e={class:"grid grid-cols-12 gap-1"},he={class:"col-span-6 flex text-left"},be={class:"text-sm text-gray-500 uppercase"},xe={class:"col-span-6 flex text-left"},ye={class:"text-sm text-gray-500 uppercase"},Ae={__name:"ServiceLists",props:["unit_services","search","office_id","unit_id","clients"],setup(x){const m=x,u=N({service:null,status:null}),t=N({search:"",id:"",client:"",appointment_type:null,office_id:m.office_id,unit_id:m.unit_id,unit_services_id:null,role:"",type:""}),v=$(!1),p=$(!1),y=$(!1),M=f=>{t.reset(),t.unit_services_id=f.id,v.value=!v.value},R=f=>{u.reset(),u.service=f,u.status=f.status!=1,p.value=!p.value},P=()=>{t.post(route("record.store"),{preserveScroll:!0,onSuccess:()=>{t.reset(),b.success("Client has been successfully added a service!",{autoClose:1e3,transition:b.TRANSITIONS.FLIP,position:b.POSITION.TOP_RIGHT}),v.value=!v.value}})},U=()=>{u.put(route("unit_service.status",{unitService:u.service}),{preserveScroll:!0,onSuccess:()=>{u.reset(),b.success("Service has been successfully updated the status!",{autoClose:1e3,transition:b.TRANSITIONS.FLIP,position:b.POSITION.TOP_RIGHT}),p.value=!p.value}})},j=f=>W(f).format("MMMM Do YYYY");return(f,s)=>(a(),r(V,null,[x.unit_services.data.length==0?(a(),r("div",E,s[11]||(s[11]=[e("p",{class:"text-center font-bold text-[5vmin] mt-12"}," No Services! ",-1)]))):g("",!0),e("div",q,[(a(!0),r(V,null,O(x.unit_services.data,(n,w)=>(a(),r("div",{key:w,class:"col-span-3"},[e("div",J,[e("div",K,[n.status==1?(a(),r("button",{key:0,onClick:k=>M(n),class:"bg-orange-500 rounded-md p-1 mr-1"},[i(h,{icon:"user"})],8,Q)):g("",!0),e("button",{onClick:k=>R(n),class:C(["rounded-md p-1",n.status==1?"bg-red-500":"bg-green-500"])},[n.status==1?(a(),B(h,{key:0,icon:"close_icon"})):(a(),B(h,{key:1,icon:"check"}))],10,X)]),e("img",{class:"object-scale-down p-8 rounded-t-lg h-[25vmin] w-[25vmin] mx-auto rounded-lg -mt-6",src:n.unit_service.photo,onerror:`this.src='${o(D)}'`,alt:"Service image"},null,8,Z),e("div",ee,[e("div",null,[e("h5",se,c(n.unit_service.name),1),e("small",null,c(n.unit_service.abbrevation),1)]),e("div",null,[e("p",{class:C(["text-xs p-1 text-center text-white rounded-lg font-bold w-[10vmin] mx-auto",n.status==1?"bg-green-500":"bg-red-500"])},c(n.status==1?"Active":"Deactivated"),3)])])])]))),128))]),e("div",te,[i(Y,{links:m.unit_services.links,search:m.search,office_id:m.office_id,unit_id:m.unit_id},null,8,["links","search","office_id","unit_id"]),e("p",oe," Showing "+c(x.unit_services.data.length)+" Units ",1)]),i(F,{show:v.value,onClose:s[8]||(s[8]=n=>v.value=!1),maxWidth:"2xl"},{title:d(()=>s[12]||(s[12]=[_("Client Admission here!")])),content:d(()=>{var n,w,k;return[e("div",le,[e("div",ne,[T(e("select",{class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full","onUpdate:modelValue":s[0]||(s[0]=l=>o(t).appointment_type=l)},s[13]||(s[13]=[e("option",{value:null,disabled:""},"Select Client Appointment",-1),e("option",{value:"schedule"},"Scheduled",-1),e("option",{value:"walkin"},"Walk-in",-1)]),512),[[I,o(t).appointment_type]]),i(S,{message:o(t).errors.appointment_type,class:"mt-2"},null,8,["message"])]),e("div",ie,[T(e("select",{class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-auto h-10 mt-5 w-full","onUpdate:modelValue":s[1]||(s[1]=l=>o(t).type=l)},s[14]||(s[14]=[e("option",{value:"",disabled:""},"Select Client Type",-1),e("option",{value:"citizen"},"Citizen",-1),e("option",{value:"business"},"Business",-1),e("option",{value:"government"},"Government",-1)]),512),[[I,o(t).type]]),i(S,{message:o(t).errors.type,class:"mt-2"},null,8,["message"])]),e("div",null,[T(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>o(t).role=l),class:"border border-gray-300 text-gray-500 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-[15vmin] h-10 mt-5 w-full"},s[15]||(s[15]=[e("option",{value:"",disabled:""},"Select Client Role",-1),e("option",{value:"student"},"Student",-1),e("option",{value:"employee"},"Employee",-1),e("option",{value:"alumni"},"Alumni",-1),e("option",{value:"guardian"},"Guardian",-1),e("option",{value:"others"},"Others",-1)]),512),[[I,o(t).role]]),i(S,{message:o(t).errors.role,class:"mt-2"},null,8,["message"])]),e("div",ae,[e("div",re,[i(G,{type:"text",label:"Search Client name",modelValue:o(t).search,"onUpdate:modelValue":s[3]||(s[3]=l=>o(t).search=l)},null,8,["modelValue"]),i(S,{message:o(t).errors.client,class:"mt-2"},null,8,["message"]),o(t).search&&!o(t).client?(a(),r("div",de,[e("ul",ue,[(a(!0),r(V,null,O(m.clients,(l,z)=>(a(),r("li",{key:z},[l.lname.toLowerCase().includes(o(t).search.toLowerCase())||l.fname.toLowerCase().includes(o(t).search.toLowerCase())?(a(),r("a",{key:0,class:"flex items-center py-2 px-4 hover:bg-gray-100 cursor-pointer",onClick:we=>(o(t).id=l.id,o(t).client=l,y.value=!1,o(t).search="")},c(l.lname+", "+l.fname+" "+(l.mname?l.mname:"")),9,ce)):g("",!0)]))),128))]),s[16]||(s[16]=e("div",{class:"flex justify-center"},[e("small",null,"Results")],-1)),e("a",{onClick:s[4]||(s[4]=l=>(y.value=!1,o(t).client="",o(t).id=!1,o(t).search="")),class:"flex items-center p-3 text-sm font-medium text-blue-600 bg-gray-50 border-t border-gray-200 hover:bg-gray-100 hover:underline cursor-pointer"}," clear search ")])):g("",!0)]),e("div",me,[o(t).client?(a(),r("button",{key:0,class:"h-10 my-auto mt-5",onClick:s[5]||(s[5]=l=>(y.value=!1,o(t).client="",o(t).id=!1,o(t).search=""))},[i(h,{icon:"close_icon",size:"sm"})])):g("",!0)])]),o(t).client?(a(),r("div",ve,[e("div",pe,[e("div",fe,[e("h5",ge,c((n=o(t).client)==null?void 0:n.fname),1),e("div",_e,[e("div",he,[i(h,{icon:"sex"}),e("span",be,c((w=o(t).client)==null?void 0:w.sex),1)]),e("div",xe,[i(h,{icon:"calendar"}),e("span",ye,c(j((k=o(t).client)==null?void 0:k.created_at)),1)])]),e("div",null,[o(t).id?(a(),r("button",{key:0,class:"w-[10vmin] bg-red-500 rounded-lg mt-6 mb-2 text-white",onClick:s[6]||(s[6]=l=>(y.value=!1,o(t).client="",o(t).id=!1,o(t).search=""))}," Remove ")):g("",!0)])])])])):g("",!0)])]}),footer:d(()=>[i(A,{onClick:s[7]||(s[7]=n=>v.value=!1),class:"mr-2 hover:bg-red-500"},{default:d(()=>s[17]||(s[17]=[_(" Cancel ")])),_:1}),i(L,{class:C([{"opacity-25":o(t).processing},"hover:bg-green-300"]),disabled:o(t).processing,onClick:P},{default:d(()=>s[18]||(s[18]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),_(" Submit ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),i(H,{show:p.value,onClose:s[10]||(s[10]=n=>p.value=!1),maxWidth:"2xl"},{title:d(()=>[_(" Are you sure you want to update status of service("+c(o(u).service.unit_service.name)+")?",1)]),content:d(()=>s[19]||(s[19]=[])),footer:d(()=>[i(A,{onClick:s[9]||(s[9]=n=>p.value=!1),class:"mr-2"},{default:d(()=>s[20]||(s[20]=[_(" nevermind ")])),_:1}),i(L,{class:C([{"opacity-25":o(u).processing},"hover:bg-green-400"]),disabled:o(u).processing,onClick:U},{default:d(()=>s[21]||(s[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),_(" Confirm ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{Ae as default};
