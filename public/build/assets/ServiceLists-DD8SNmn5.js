import{T,I as z,r as x,d as u,a as s,e as k,F as $,g as O,b as l,t as v,w as n,o as i,n as C,c as R,u as a,f as m,h as j,k as J,v as X}from"./app-BfZSAuWz.js";import{_ as N}from"./Icon-oSful9ja.js";import{d as q}from"./sasmes_logo-C-K0o8NT.js";import{_ as V}from"./PrimaryButton-DwjROcvG.js";import{_ as K}from"./DialogModal-B7CPSgZq.js";import{_ as P}from"./SecondaryButton-iWRP7IDH.js";import{_ as B}from"./Input-DBj6VIfb.js";import{_ as L}from"./InputError-BLlNpg99.js";import{_ as M}from"./ConfirmationModal-B6eliWKO.js";import{_ as Q}from"./Pagination2-DfIYuTmR.js";import{i as d}from"./index-DXl9_Sur.js";const Y={key:0},Z={class:"grid grid-cols-12 gap-2"},ee={class:"w-full h-[38vmin] max-w-sm bg-white border border-gray-200 rounded-lg shadow group relative"},se={class:"absolute hidden group-hover:block top-0 right-0 text-white p-2 rounded"},te=["onClick"],oe=["onClick"],re=["src","onerror"],ae={class:"px-5 pb-5"},le={class:"text-md font-semibold tracking-tight text-gray-900"},ne={class:"flex items-center justify-between bottom-1 fixed"},ie={class:"mt-6 text-sm text-gray-500"},ue={class:"grid grid-cols-12 gap-2"},de={key:0,class:"col-span-12 mx-auto"},ce=["src"],me=["onClick"],pe={class:"col-span-12"},ve={class:"grid grid-cols-12 gap-1"},fe={class:"col-span-12"},ge={class:"col-span-full"},he={class:"grid grid-cols-12 gap-1 border p-1 mt-1 rounded-lg border-gray-300 h-[40vmin] overflow-y-auto"},be={key:0,class:"col-span-12"},we=["value"],_e={for:"bordered-checkbox-1",class:"w-full py-1 ms-2 text-sm font-medium text-gray-700"},Pe={__name:"ServiceLists",props:["services","search","office_id","office","offices","units"],setup(I){const S=I,r=T({name:null,abbrevation:null,image:[],service:null,office_id:"",selected_units:[]});z(()=>{});const b=T({service:null}),p=T({service:null,status:null}),g=x(!1),y=x(!1),f=x([]),h=x(!1),w=x([]),A=o=>{r.reset(),f.value=[],w.value=[],r.service=o,r.name=o.name,r.abbrevation=o.abbrevation,r.office_id=o.office_id,f.value.push(o.photo);var e=[];o.unit_service.forEach(t=>{e.push(t.unit.id)}),S.units.forEach(t=>{t.office_id==o.office_id&&w.value.push(t)}),e.forEach(t=>{var c=w.value.findIndex(_=>_.id===t);console.log(c,t),c>-1&&w.value.splice(c,1)}),g.value=!g.value},U=o=>{p.reset(),p.service=o,p.status=o.status!=1,h.value=!h.value},D=()=>{let o=document.getElementById("profile_photo");o.click(),o.onchange=e=>{f.value.push(window.URL.createObjectURL(e.target.files[0])),r.image=e.target.files[0]}},F=o=>{o.preventDefault();for(const t of o.dataTransfer.files){var e=URL.createObjectURL(t);f.value.push(e),r.image=t}},H=o=>{f.value.splice(o,1),r.image=null,d.warn("Image remove",{autoClose:1e3,transition:d.TRANSITIONS.FLIP,position:d.POSITION.TOP_RIGHT})},G=()=>{r.post(route("service.update",{service:r.service}),{preserveScroll:!0,onSuccess:()=>{r.reset(),d.success("Service has been successfully updated!",{autoClose:1e3,transition:d.TRANSITIONS.FLIP,position:d.POSITION.TOP_RIGHT}),g.value=!g.value}})},E=()=>{b.delete(route("service.destroy",{service:b.service}),{preserveScroll:!0,onSuccess:()=>{b.reset(),d.success("Service has been successfully deleted!",{autoClose:1e3,transition:d.TRANSITIONS.FLIP,position:d.POSITION.TOP_RIGHT}),y.value=!y.value}})},W=()=>{p.put(route("service.status",{service:p.service}),{preserveScroll:!0,onSuccess:()=>{p.reset(),d.success("Unit has been successfully updated the status!",{autoClose:1e3,transition:d.TRANSITIONS.FLIP,position:d.POSITION.TOP_RIGHT}),h.value=!h.value}})};return(o,e)=>(i(),u($,null,[I.services.data.length==0?(i(),u("div",Y,e[11]||(e[11]=[s("p",{class:"text-center font-bold text-[5vmin] mt-12"}," No Services! ",-1)]))):k("",!0),s("div",Z,[(i(!0),u($,null,O(I.services.data,(t,c)=>(i(),u("div",{key:c,class:"col-span-3"},[s("div",ee,[s("div",se,[o.$page.props.auth.user.user_type=="root"||o.$page.props.auth.user.user_type=="admin"||o.$page.props.auth.user.user_type=="vcsas"||o.$page.props.auth.user.user_type=="director"||o.$page.props.auth.user.user_type=="unit_head"?(i(),u("button",{key:0,onClick:_=>A(t),class:"bg-orange-500 rounded-md p-1 mr-1"},[l(N,{icon:"pencil"})],8,te)):k("",!0),o.$page.props.auth.user.user_type=="root"||o.$page.props.auth.user.user_type=="admin"||o.$page.props.auth.user.user_type=="vcsas"||o.$page.props.auth.user.user_type=="director"||o.$page.props.auth.user.user_type=="unit_head"?(i(),u("button",{key:1,onClick:_=>U(t),class:C(["rounded-md p-1",t.status==1?"bg-red-500":"bg-green-500"])},[t.status==1?(i(),R(N,{key:0,icon:"close_icon"})):(i(),R(N,{key:1,icon:"check"}))],10,oe)):k("",!0)]),s("img",{class:"object-scale-down p-8 rounded-t-lg h-[25vmin] w-[25vmin] mx-auto rounded-lg -mt-6",src:t.photo,onerror:`this.src='${a(q)}'`,alt:"Service image"},null,8,re),s("div",ae,[s("div",null,[s("h5",le,v(t.name),1),s("small",null,v(t.abbrevation),1)]),s("small",null,"Own by "+v(t.office.name)+"("+v(t.office.abbrevation)+")",1),s("div",null,[s("p",{class:C(["text-xs p-1 text-center text-white rounded-lg font-bold w-[10vmin] mx-auto",t.status==1?"bg-green-500":"bg-red-500"])},v(t.status==1?"Active":"Deactivated"),3)])])])]))),128))]),s("div",ne,[l(Q,{links:S.services.links,search:S.search,office:S.office},null,8,["links","search","office"]),s("p",ie," Showing "+v(I.services.data.length)+" Services ",1)]),l(K,{show:g.value,onClose:e[6]||(e[6]=t=>g.value=!1),maxWidth:"2xl"},{title:n(()=>e[12]||(e[12]=[m("Update Service here!")])),content:n(()=>[s("div",ue,[f.value.length!=0?(i(),u("div",de,[(i(!0),u($,null,O(f.value,(t,c)=>(i(),u("div",{key:c,class:"flex-shrink-0"},[s("img",{class:"w-64 h-64 rounded-lg",src:t},null,8,ce),s("button",{onClick:_=>H(c),class:"flex text-gray-400 hover:text-gray-600 mt-2 mx-auto"},e[13]||(e[13]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[s("path",{class:"text-red-500","stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),s("span",{class:"text-red-500"},"Remove",-1)]),8,me)]))),128))])):k("",!0),f.value.length!=1?(i(),u("div",{key:1,class:"col-span-12",onDragover:e[0]||(e[0]=j(()=>{},["prevent"])),onDrop:e[1]||(e[1]=j(()=>{},["prevent"]))},[s("label",{onDrop:F,onClick:D,for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},e[14]||(e[14]=[s("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[s("svg",{"aria-hidden":"true",class:"w-8 h-8 mb-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),s("p",{class:"mb-1 text-sm text-gray-500"},[s("span",{class:"font-semibold"},"Click to upload"),m(" or drag and drop ")]),s("p",{class:"text-xs text-gray-500"}," PNG, JPG or JPEG (MAX.1024kb) ")],-1),s("input",{id:"profile_photo",type:"file",accept:"image/png, image/gif, image/jpeg",class:"hidden"},null,-1)]),32)],32)):k("",!0),s("div",pe,[l(L,{message:a(r).errors.image,class:"mt-2"},null,8,["message"])])]),s("div",ve,[s("div",fe,[l(B,{type:"text",label:"Office name",modelValue:a(r).name,"onUpdate:modelValue":e[2]||(e[2]=t=>a(r).name=t)},null,8,["modelValue"]),l(L,{message:a(r).errors.name,class:"mt-2"},null,8,["message"])])]),s("div",ge,[l(B,{type:"text",label:"Office abbrevation",modelValue:a(r).abbrevation,"onUpdate:modelValue":e[3]||(e[3]=t=>a(r).abbrevation=t)},null,8,["modelValue"]),l(L,{message:a(r).errors.abbrevation,class:"mt-2"},null,8,["message"])]),s("div",he,[w.value.length==0?(i(),u("div",be,e[15]||(e[15]=[s("p",{class:"text-center"}," There's no units available. ",-1)]))):k("",!0),(i(!0),u($,null,O(w.value,(t,c)=>(i(),u("div",{key:c,class:"col-span-4 flex items-center ps-4 border border-gray-200 rounded"},[J(s("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[4]||(e[4]=_=>a(r).selected_units=_),name:"bordered-checkbox",class:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500"},null,8,we),[[X,a(r).selected_units]]),s("label",_e,v(t.name),1)]))),128))])]),footer:n(()=>[l(P,{onClick:e[5]||(e[5]=t=>g.value=!1),class:"mr-2 hover:bg-red-500"},{default:n(()=>e[16]||(e[16]=[m(" Cancel ")])),_:1}),l(V,{class:C([{"opacity-25":a(r).processing},"hover:bg-green-300"]),disabled:a(r).processing,onClick:G},{default:n(()=>e[17]||(e[17]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),m(" Submit ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(M,{show:y.value,onClose:e[8]||(e[8]=t=>y.value=!1),maxWidth:"2xl"},{title:n(()=>[m(" Are you sure you want to delete this service("+v(a(b).service.name)+")?",1)]),content:n(()=>e[18]||(e[18]=[s("p",{class:"text-red-500"}," This action can update the system and this is not reversible! ",-1)])),footer:n(()=>[l(P,{onClick:e[7]||(e[7]=t=>y.value=!1),class:"mr-2"},{default:n(()=>e[19]||(e[19]=[m(" nevermind ")])),_:1}),l(V,{class:C([{"opacity-25":a(b).processing},"hover:bg-green-400"]),disabled:a(b).processing,onClick:E},{default:n(()=>e[20]||(e[20]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),m(" Delete ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(M,{show:h.value,onClose:e[10]||(e[10]=t=>h.value=!1),maxWidth:"2xl"},{title:n(()=>[m(" Are you sure you want to update status of service("+v(a(p).service.name)+")?",1)]),content:n(()=>e[21]||(e[21]=[])),footer:n(()=>[l(P,{onClick:e[9]||(e[9]=t=>h.value=!1),class:"mr-2"},{default:n(()=>e[22]||(e[22]=[m(" nevermind ")])),_:1}),l(V,{class:C([{"opacity-25":a(p).processing},"hover:bg-green-400"]),disabled:a(p).processing,onClick:W},{default:n(()=>e[23]||(e[23]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),m(" Confirm ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}};export{Pe as default};
